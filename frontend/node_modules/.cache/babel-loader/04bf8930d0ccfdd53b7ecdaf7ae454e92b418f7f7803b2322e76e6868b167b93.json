{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shivani\\\\react recipe-project\\\\recipe-manager\\\\src\\\\Components\\\\RecipeCard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../utils/Auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RecipeCard = props => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [avgRating, setAvgRating] = useState(0);\n  useEffect(() => {\n    const storedRecipes = JSON.parse(localStorage.getItem('recipes')) || []; //[{}]\n    const currentRecipeName = props.recipe.name.trim().toLowerCase(); //recipe name\n    // console.log(\"currentRecipeName\",currentRecipeName);\n    const allRatings = storedRecipes.filter(r => r.name.trim().toLowerCase() === currentRecipeName && Array.isArray(r.ratings)).flatMap(r => r.ratings);\n    // console.log(\"allRatings\",allRatings);//[ {userEmail, rating}, {userEmail, rating}, ... ]\n    //all stored recipe mathi only choose recipe k jenu name currentRecipeName sathe exact match kare and rating\n    //cha aa pn array hovi joy .flatmap() recipe ander all rating ak motu array banave da.\n\n    const validRatings = allRatings.map(r => r.rating).filter(r => typeof r === 'number' && r > 0);\n    // console.log(\"validRatings\",validRatings);//[rating number array] -> [4,4,4]\n\n    if (validRatings.length > 0) {\n      const sum = validRatings.reduce((acc, val) => {\n        console.log(`acc = ${acc}, val = ${val}`);\n        return acc + val;\n      }, 0);\n      const avg = sum / validRatings.length;\n      setAvgRating(avg);\n      // console.log(\"avg\", avg); // number\n    } else {\n      setAvgRating(0);\n    }\n  }, [props.recipe]);\n  const isUserOwner = user && user.email === props.recipe.userEmail;\n  const onEdit = () => {\n    // Navigate to the addRecipe page with the current recipe data\n    navigate(`/editRecipe/${props.recipe.id}`);\n  };\n  const onDelete = () => {\n    // Remove the recipe from localStorage\n    const storedRecipes = JSON.parse(localStorage.getItem('recipes')) || []; //store recipe//[{}]\n    const updatedRecipes = storedRecipes.filter(recipe => recipe.id !== props.recipe.id); //{}\n    //stored recipe ma id cha aa props.recipe.id jevi na hoi to reva devane \n    // Update the localStorage with the new filtered list\n    localStorage.setItem('recipes', JSON.stringify(updatedRecipes));\n    // Call the parent's onDelete function to update the state\n    if (props.onDelete) {\n      props.onDelete(props.recipe.id); // Pass the ID of the recipe to delete\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: props.onClick,\n    style: {\n      border: '1px solid #ddd',\n      padding: 16,\n      borderRadius: 8,\n      backgroundColor: '#fff',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      cursor: 'pointer',\n      transition: 'box-shadow 0.3s'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: props.recipe.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Cuisine:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 12\n        }, this), \" \", props.recipe.cuisine]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Cooking Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 12\n        }, this), \" \", props.recipe.time]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Rating:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 12\n        }, this), \" \", avgRating.toFixed(1), \" / 5\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), isUserOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: e => e.stopPropagation(),\n      style: {\n        marginTop: 10,\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onEdit,\n        style: {\n          backgroundColor: '#f0ad4e'\n        },\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onDelete,\n        style: {\n          backgroundColor: '#d9534f'\n        },\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(RecipeCard, \"RBOeE8yF4x69bya5TPQ1IMomSeA=\", false, function () {\n  return [useNavigate];\n});\n_c = RecipeCard;\nexport default RecipeCard;\nvar _c;\n$RefreshReg$(_c, \"RecipeCard\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useNavigate","AuthContext","jsxDEV","_jsxDEV","RecipeCard","props","_s","navigate","user","avgRating","setAvgRating","storedRecipes","JSON","parse","localStorage","getItem","currentRecipeName","recipe","name","trim","toLowerCase","allRatings","filter","r","Array","isArray","ratings","flatMap","validRatings","map","rating","length","sum","reduce","acc","val","console","log","avg","isUserOwner","email","userEmail","onEdit","id","onDelete","updatedRecipes","setItem","stringify","onClick","style","border","padding","borderRadius","backgroundColor","display","flexDirection","justifyContent","cursor","transition","children","fileName","_jsxFileName","lineNumber","columnNumber","cuisine","time","toFixed","e","stopPropagation","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/Shivani/react recipe-project/recipe-manager/src/Components/RecipeCard.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { AuthContext } from '../utils/Auth';\r\n\r\nconst RecipeCard = (props) => {\r\n  const navigate = useNavigate();\r\n  const { user } = useContext(AuthContext);\r\n  const [avgRating, setAvgRating] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const storedRecipes = JSON.parse(localStorage.getItem('recipes')) || [];//[{}]\r\n    const currentRecipeName = props.recipe.name.trim().toLowerCase();//recipe name\r\n    // console.log(\"currentRecipeName\",currentRecipeName);\r\n    const allRatings = storedRecipes\r\n      .filter(r => r.name.trim().toLowerCase() === currentRecipeName && Array.isArray(r.ratings))\r\n      .flatMap(r => r.ratings);\r\n    // console.log(\"allRatings\",allRatings);//[ {userEmail, rating}, {userEmail, rating}, ... ]\r\n    //all stored recipe mathi only choose recipe k jenu name currentRecipeName sathe exact match kare and rating\r\n    //cha aa pn array hovi joy .flatmap() recipe ander all rating ak motu array banave da.\r\n\r\n    const validRatings = allRatings\r\n      .map(r => r.rating)\r\n      .filter(r => typeof r === 'number' && r > 0);\r\n    // console.log(\"validRatings\",validRatings);//[rating number array] -> [4,4,4]\r\n    \r\n    if (validRatings.length > 0) {\r\n  const sum = validRatings.reduce((acc, val) => {\r\n    console.log(`acc = ${acc}, val = ${val}`);\r\n    return acc + val;\r\n  }, 0);\r\n\r\n  const avg = sum / validRatings.length;\r\n  setAvgRating(avg);\r\n  // console.log(\"avg\", avg); // number\r\n\r\n} else {\r\n  setAvgRating(0);\r\n}\r\n  }, [props.recipe]);\r\n\r\n  const isUserOwner = user && user.email === props.recipe.userEmail;\r\n\r\n  const onEdit = () => {\r\n    // Navigate to the addRecipe page with the current recipe data\r\n    navigate(`/editRecipe/${props.recipe.id}`);\r\n  };\r\n\r\n  const onDelete = () => {\r\n     // Remove the recipe from localStorage\r\n    const storedRecipes = JSON.parse(localStorage.getItem('recipes')) || [];//store recipe//[{}]\r\n    const updatedRecipes = storedRecipes.filter(recipe => recipe.id !== props.recipe.id);//{}\r\n    //stored recipe ma id cha aa props.recipe.id jevi na hoi to reva devane \r\n    // Update the localStorage with the new filtered list\r\n    localStorage.setItem('recipes', JSON.stringify(updatedRecipes));\r\n    // Call the parent's onDelete function to update the state\r\n    if (props.onDelete) {\r\n      props.onDelete(props.recipe.id); // Pass the ID of the recipe to delete\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onClick={props.onClick}\r\n      style={{\r\n        border: '1px solid #ddd',\r\n        padding: 16,\r\n        borderRadius: 8,\r\n        backgroundColor: '#fff',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        cursor: 'pointer',\r\n        transition: 'box-shadow 0.3s',\r\n      }}\r\n    >\r\n      <div>\r\n        <h3>{props.recipe.name}</h3>\r\n        <p><b>Cuisine:</b> {props.recipe.cuisine}</p>\r\n        <p><b>Cooking Time:</b> {props.recipe.time}</p>\r\n        <p><b>Rating:</b> {avgRating.toFixed(1)} / 5</p>\r\n      </div>\r\n\r\n      {isUserOwner && (\r\n        <div\r\n          onClick={e => e.stopPropagation()}\r\n          style={{ marginTop: 10, display: 'flex', justifyContent: 'space-between' }}\r\n        >\r\n          <button onClick={onEdit} style={{ backgroundColor: '#f0ad4e' }}>Edit</button>\r\n          <button onClick={onDelete} style={{ backgroundColor: '#d9534f' }}>Delete</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RecipeCard;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}